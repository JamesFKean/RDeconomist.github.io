<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <title>WHO data</title> -->
</head>

<body>
    
<p class="intro">Richard's API tester</p>    

<label for="url">Enter an API here:</label>

<input type="url" name="url" id="url"
       placeholder="https://api.example.com"
       pattern="https://.*" size="30"
       required>


<!-- Begin the JavaScript that is going to fetch the data for us: !-->

<script>
    
    // WORLD HEALTH ORGANISATION:
        // Problem with WHO is that no Access Control Origin Header is present.
        // Plug in that can be used to fit this:  https://chrome.google.com/webstore/detail/moesif-origin-cors-change/digfbfaphojjndkpccljibejjbppifbc?hl=en-US
    
    const urls = [
        'https://apps.who.int/gho/athena/api/GHO/WHOSIS_000001.json?profile=simple',
        'https://apps.who.int/gho/athena/api/GHO/M_Est_tob_curr_std.json?profile=simple',
        'https://apps.who.int/gho/athena/api/GHO/GHED_CHEGDP_SHA2011.json?profile=simple',
        'https://apps.who.int/gho/athena/api/GHO/SA_0000001822.json?profile=simple'
    ]

    // Example: Log one of the urls as an example:
    console.log(urls[0])

    // Example: Now pick one of urls:
    const url = urls[0]

    // Example: Fetch and log the results:
    fetch(url)
        .then(response => response.json())
        .then(data => {
        console.log(data) // Prints result from `response.json()` in getRequest
        })
        .catch(error => console.error(error))

    // Code: Loop to fetch them all and log the results:
    for (var i = 0; i < urls.length; i++) {
        fetch(urls[i])
        .then(response => response.json())
        .then(data => {
             console.log(data) // Prints result from `response.json()` in getRequest
        console.log(data.fact)
        })
        .catch(error => console.error(error))

        
    }


</script>

</body>


</html>
