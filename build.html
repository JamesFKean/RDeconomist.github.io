<!DOCTYPE html>
<html lang="en">


<!-- //////////////////// HEAD ///////////////////////////////-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart Builder</title>

    <!--Adding Style Sheet-->
    <link rel="stylesheet" href="css/form.css">
    <link rel="stylesheet" href="css/tabs.css">

    
       <!-- STUFF NEEDED ON PAGE FROM CDN -->
       <!-- (Content devliery networks) -->

      <!--The next three lines allow the Vega embed-->
      <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

      <!--Papa Parse - for dealing with CSVs-->
      <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>

    
</head>
<!-- //////////////////// HEAD, END ///////////////////////////////-->


<!-- //////////////////// BODY ///////////////////////////////-->
<body>

  <!-- LEFT HAND SECTION IS THE FORM -->
    <div class="row">
      <div class="column">
        <section class="contact-form">
          <h1>INPUT</h1>
          <p>Pick your options below</p>

          <form>
          <!-- Hidden option picks the schema:   -->
          <input name="$schema" type="hidden" value="https://vega.github.io/schema/vega-lite/v5.json"/>  

          <!-- Now three field sets for the inputs:  -->
          <fieldset>
            <legend>data</legend>
            <div class="input-group">
            <!-- <label for="name">Data</label> -->
            <input 
              id="url" 
              name="dataUrl" 
              type="text"
              placeholder="Paste data link here"/>
            </div>

        <div class="input-group-data">
          <input id="salutation-mr" name="dataFormatType" type="radio" value="csv"/>
          <label class="inline" for="salutation-mr">CSV</label>
          <button class="fetchButton" onclick="fetchCSV()">Fetch CSV</button>

          
          <input id="salutation-mrs" name="dataFormatType" type="radio" value="json"/>
          <label class="inline" for="salutation-mrs">JSON</label>
          <button class="fetchButton" onclick="fetchJSON()">Fetch JSON</button>

          
          
      
        </div>

          </fieldset>

          <fieldset>

            <legend>appearance</legend>

            <div class="input-group-left">
              <!-- <label for="subject">Chart type</label> -->
              <select id="subject" name="mark" placeholder="Title">
                <option>line</option>
                <option>bar</option>
                <option>area</option>
                <option>point</option>
              </select>
          </div>

        <div class="input-group-right">
            <!-- <label for="name">Data</label> -->
            <input 
              id="title" 
              name="title" 
              type="text"
              placeholder="Title"/>
        </div>

        <div class="input-group-left">
          <!-- <label for="name">Data</label> -->
          <input 
            id="title" 
            name="height" 
            type="text"
            placeholder="Height"/>
          </div>

      
          <!-- <label for="name">Data</label> -->
          <div class="input-group-right">
          <input 
            id="title" 
            name="width" 
            type="text"
            placeholder="Width"/>
          </div>
        </fieldset>

          <fieldset>

            <legend>variables</legend>

          <div class="input-group-left">
            <label for="name" class="">X</label>
            <input id="name" name="xField" type="text"/>
            <select id="subject" name="xType">
              <option value="temporal">Date</option>
              <option value="quantitative">Number</option>
              <option>ordinal</option>
              <option>nominal</option>
            </select>
        </div>

        <div class="input-group-right">
          <label for="name" class="">Y</label>
          <input id="name" name="yField" type="text"/>
          <select id="subject" name="yType">
              <option value="temporal">Date</option>
              <option value="quantitative">Number</option>
              <option>ordinal</option>
              <option>nominal</option>
          </select>
      </div>

      

          </fieldset>
          
          <!-- Finally the submit button -->
          <button type="submit" class="submitButton">Build Chart</button>
          
          </form>
        </section>
      </div>
    <!-- END OF LEFT HAND COLUMN -->  

    <!-- RIGHT HAND COLUMN IS OUTPUTS -->
    <div class="column">
      <section class="contact-form">
        <h1>OUTPUT</h1>

        <div class="pc-tab">
          <input checked="checked" id="tab1" type="radio" name="pct" />
          <input id="tab2" type="radio" name="pct" />
          <input id="tab3" type="radio" name="pct" />
            <nav>
            <ul>
              <li class="tab1">
                <label for="tab1">Chart</label>
              </li>
              <li class="tab2">
                <label for="tab2">Data</label>
              </li>
              <li class="tab3">
                <label for="tab3">Code</label>
              </li>
            </ul>
          </nav>
          
          <section>
            <div class="tab1">
                <!-- <div class="results"> -->
                   <p>Your visualisation:</p>
                   <!--Set the Div that the chart is going in-->
                  <div id="chart"></div>
                <!-- </div> -->
            </div>
                  
      
            <div class="tab2">
              <!-- <div class="results"> -->
                <p>The dataset you loaded:</p>
                <!--Div for data to go in-->
                <div class="dataLoaded" id="dataLoaded">
                  <!-- (B) GENERATE HTML TABLE HERE -->
                    <table id="csvTable"></table>
                </div>
              <!-- </div> -->
            </div>

            <div class="tab3">
              <p>Your chart code in JSON format:</p>
              <div class="results"><pre></pre></div>
           </div>                   
          </section>
        
        </section>
      </div>
   </div>
</body>

<!-- //////////////////// BODY, END ///////////////////////////////-->





<!--Adding javascript-->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.13.0/polyfill.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>


<!-- Files that I have written -->
<script type="text/javascript" src="js/formSubmission.js"></script>
<script type="text/javascript" src="js/fetchData.js"></script>



</html>